<!DOCTYPE html>  
<html lang="en">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">  
    <meta name="description" content="Удиви своих друзей балансом богача">
    <meta property="og:image" content="images/dc-image1.jpg">
    <meta property="og:title" content="Пранк DC">
    <meta property="og:url" content="dcwalletprank.pp.ua">
    <meta name="google" content="notranslate">
    <link rel="stylesheet" href="styles/styles.css"> 
    <link rel="website icon" type="png" href="images/logoapp.png"> 
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>  
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>  
    <title>DC Next App</title>  
    <script src="https://rawgit.com/schmich/instascan-builds/master/instascan.min.js"></script> 
    <script src="js/index.js"></script>
    <script src="js/opens.js"></script>
    <link rel="manifest" href="manifest.json">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">
</head>
  
<style>  
  
 .form.openn {
    bottom: 0;
}


.form{
  border-radius: 5px;
  height: 820px;
  width: 100%;
  bottom: -850px;
  position: absolute;
  transition: bottom 0.4s;
  background: #F1F1F3;
  z-index: 700 !important;
  overflow-y: hidden;
}

.form-header{
  display: flex;
  justify-content: space-around;
  align-items: center;
  background: #017CFE;
  height: 40px;
  padding-top: 30px;
  color: white;
}

.form-back-icon{
  font-size: 30px;
  margin-bottom: 7px;
}

.form-main{
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
}

.form-input1{
  border: 0;
  width: 250px;
  height: 45px;
  border-top-left-radius: 10px; 
  border-bottom-left-radius: 10px;
  margin-top: 20px;
  margin-left: 5px;
  padding: 10px;
  font-size: 16px;
}

.form-button1{
  border: 0;
  width: 350px;
  height: 50px;
  border-radius: 15px; 
  margin-top: 12px;
  margin-right: 5px;
  background: #CBE5FE;
  color: #2A83BF;
  font-size: 17px;
}

.form-input2{
  border: 0;
  width: 350px;
  height: 45px;
  border-radius: 10px; 
  margin-top: 12px;
  margin-right: 5px;
  padding: 10px;
  font-size: 15px;
  font-weight: 500;
}

 .form-input3{
  border: 0;
  width: 350px;
  height: 45px;
  border-radius: 10px; 
  margin-top: 10px;
  margin-right: 5px;
   padding: 10px;
   font-size: 16px;
}

.min-summa{
  margin-top: 5px;
  margin-left: 250px;
  color: grey;
  font-size: 13PX;
}

.form-blocks{
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100%;
  margin-top: 15px;
}

.form-block1{
  background: #017CFE;
  color: white;
  border-radius: 15px;
  width: 90px;
  height: 60px;
  padding: 10px;
  margin-right: 7px;
}

.form-block2{
  background: white;
  color: grey;
  border-radius: 15px;
  width: 90px;
  height: 60px;
  padding: 10px;
  margin-left: 7px;
  font-weight: 700;
}

.form-text{
  margin-left: 5px;
  margin-top: 12px;
  font-size: 14px;
  color: grey;
}

.form-button2{
  border: 0;
  color: white;
  background: #F97326;
  border-radius: 15px;
  width: 350px;
  height: 65px;
  margin-top: 165px;
  font-size: 20px;
  font-weight: 500;
}

.loader {
    position: absolute;
    top: 0;
    left: 0;
    width: 393px;
    height: 100%;
    background-image: url(./images/apploading.jpg);
    background-position: center;
    background-size: cover;
    z-index: 9999;
}

.edit-window {
        display: none;
        position: absolute;
        top: 50%;
        left: 70%;
        transform: translate(-50%, -50%);
        padding: 20px;
        background-color: #f9f9f9;
        border: 1px solid #ccc;
        border-radius: 5px;
        z-index: 19999;
}

#checkAccount{
  margin-left: 40px;
  margin-bottom: 15px;
  padding: 3px;
}

.verification-msg{
  font-size: 14.1px;
  margin: 10px 10px;
  text-align: center;
  text-shadow: 2px 2px 4px rgba(2, 204, 207, 0.5);
}

.input-in-ew{
  padding: 5px; 
  border-radius: 10px; 
  border: 1px solid grey;color: green;
  margin-bottom: 15px;
  margin-left: 10px;
}

.input-in-ew:hover {
  border: 1px solid blue;
}

.rubik {
  font-family: "Rubik", sans-serif;
  font-optical-sizing: auto;
}

.welcmodal {
    display: none; /* Скрыто по умолчанию */
    position: fixed;
    z-index: 1000; /* Поверх всех элементов */
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5); /* Полупрозрачный черный фон */
    justify-content: center;
    align-items: center;
}

.welcmodal-content {
    background-color: white;
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    font-size: 1.5rem;
    color: #0258a3;
    animation: fadeIn 1s; /* Анимация появления */
    filter: drop-shadow(1px 1px 20px rgb(31, 254, 235));
  }

@keyframes fadeIn {
    from { opacity: 0; transform: scale(0.8); }
    to { opacity: 1; transform: scale(1); }
}

@keyframes fadeOut {
    from { opacity: 1; transform: scale(1); }
    to { opacity: 0; transform: scale(1.2); }
}

@keyframes dissolve {
    0% { opacity: 1; }
    100% { opacity: 0; transform: scale(2); }
}

  
</style>  
  
<body>  

  <div id="loader" class="loader"></div>
  <div id="content" class="content">
   
  <div id="notification" class="notification"> 
  <div class="notification-content"><h4>Успешно</h4><p class="spo">Список поставщиков обновлён</p></div> 
  </div> 
      
<div id="container" class="container allskeleton">  
    <div class="prilozhenie">  
        <header>  
            <div class="header-bar1">  
              <img src="images/dc.next.menushka.png" class="icon-menu" onclick="toggleSidebar()" width="35"> 
            </div>  
            <img style="margin-left: 30px;" src="images/dc.nextlogo.png" width="65px" alt="">  
            <div class="header-bar2">  
              <img class="icon1" src="images/dc.next-qr-code.png" width="30px">  
              <img class="icon1 uvedomleniye" src="images/dc.next-uvedomleniye.png" width="26px">  
            </div>  
           
<div class="sidebar"> 
    <nav class="menu"> 
        <ul> 
          <img width="190px" src="images/dc.next-formenu.png"> 
          <div class="name-number-edit-window">
            <li><p class="username" href="#">Имя Фамилия</p></li> 
            <p class="telephon-number-in-menu">+992 (00) 000-0000</p><br>
          </div>
            <li class="ispvp"><img src="images/dc.next-identification.png" width="35px"><a href="perevod.html"><p class="menu-links"></p></a></li> 
            <li class="ispvp"><img src="images/dc.next-svyazsbankom.png" width="35px"><a href="#"><p class="menu-links"> Связь с банком</p></a></li> 
            <li class="ispvp"><img src="images/dc.next-parametri.png" width="35px"><a href="#"><p class="menu-links"> Параметры</p></a></li> 
            <li class="ispvp"><img src="images/dc.next-voprosi.png" width="35px"><a href="#"><p class="menu-links"> Частые вопросы</p></a></li> 
            <li class="ispvp"><img src="images/dc.next-podelitsya.png" width="35px"><a href="#"><p class="menu-links"> Поделиться приложением</p></a></li> 
        </ul> 

        <div class="edit-window">
          <button class="close-edit-window" style="margin-bottom: 25px; border: 0; margin-left: 185px;">Х</button>
          <input class="input-in-ew" type="text" id="newName" placeholder="Введите новое имя">
          <!-- Добавляем кнопку для проверки аккаунта -->
          <button id="checkAccount">Проверить аккаунт</button>
          <input class="input-in-ew" type="tel" maxlength="18" id="newNumber" placeholder="Введите новый номер">
          <input class="input-in-ew" id="newBalance" type="tel" maxlength="7" placeholder="Введите новый баланс">
          <div class="verification-msg"></div>
          <button style="margin-top: px; margin-left: 60px; padding: 5px;" id="editButton">Применить</button>
          <button id="installButton" style="display: none;">Install App</button>
        </div>

      <button class="vikhod-btn"><img style="margin: 10px;" src="images/dc.next-vikhod.png" width="30px"> Выход</button> 
       <div class="versiya-sborka-block"> 
      <p>Версия: 2.3.1</p> <p style="margin-left: 15px;">Сборка: 281:3451</p> 
      </div> 
      <nav class="menu2" onclick="toggleSidebar()"></nav> 
    </nav> 
</div> 
        </header>  
   
        <main>  
            <div class="main-header">  
                <div class="input-poisk">  
                    <ion-icon class="icon-poisk" name="search-outline"></ion-icon>  
                    <input class="poisk" type="text" placeholder="Поиск">  
                </div>  
  
                <div class="balance">  
                    <div class="check-and-time">  
                        <div class="check">  
                         <h1 class="hide-balance">****</h1><h1 class="balance-view rubik">0,10</h1><h6 class="tjs">TJS</h6><br>  
                        </div>  
                        <div class="time">  
                            <p>30.04.24 - 18:29:10</p>  
                        </div>  
                    </div>  
                    <div class="balance-icons">  
                        <ion-icon id="eye-icon" name="eye-outline"></ion-icon>  
                        <ion-icon class="icon-repeat" id="showNotification" name="sync-outline"></ion-icon>  
                    </div>                  
                </div>  
            </div>  

            <video id="scanner" style="display: none; border: 5px dashed grey; border-radius: 15px; width: 390px; height: 600px; position: absolute; z-index: 155455; background-color: black;"></video> 
  
            <div class="main-card-razdels">  
                <div class="razdel1">  
                    <div class="card1" onclick="toggleForm()">  
                        <img class="dc-image1" src="images/dc-image1.jpg" alt="dc">  
                        <p style="margin-top: 3px;">DC (по номеру телефона)</p>  
                    </div>  
                </div>  
  
                <div class="razdel2">  
                    <div class="card2">  
                        <img style="margin-top: 3px; margin-left: 15px;" width="205px" src="images/dc.next1.png" alt="">  
                    </div>  
                    <div class="card3">  
                        <img style="margin-top: 3px; margin-left: 20px;" width="195px" src="images/dc.next2.png" alt="">  
                    </div>  
                    <div class="card4">  
                        <img style="margin-top: 3px; margin-left: 25px; border-radius: 10px;" width="160px" src="images/dc.next3.png" alt="">  
                    </div>  
                </div>  
  
                <div class="razdel3" onclick="vibratePhone()">  
                    <div class="card5">  
                        <img style="margin-left: 15px;" width="240px" src="images/dc.next4.png" alt="">  
                    </div>  
                    <div class="card6">  
                        <img style="margin-left: 9px;" width="118px" src="images/dc.next5.png" alt="">  
                    </div>  
                </div>  
  
                <div class="razdel4" onclick="vibratePhone()">  
                    <div class="card7">
                      <img style="margin-left: 15px;" width="118px" src="images/dc.next6.png" alt="">  
                    </div>  
                    <div class="card8">  
                        <img style="margin-left: 9px;" width="113px" src="images/dc.next7.png" alt="">  
                    </div>  
                    <div class="card9">  
                        <img style="margin-left: 11px;" width="113px" src="images/dc.next8.png" alt="">  
                    </div>  
                </div>  
  
                <div class="razdel5" onclick="vibratePhone()">  
                    <div class="card7">  
                        <img style="margin-left: 16px; margin-bottom: 1px;" width="116px" src="images/dc.next9.png" alt="">  
                    </div>  
                    <div class="card8">  
                        <img style="margin-left: 9px;" width="120px" src="images/dc.next10.png" alt="">  
                    </div>  
                    <div class="card9">  
                        <img style="margin-left: 6px;" width="115px" src="images/dc.next11.png" alt="">  
                    </div>  
                </div>  
            </div>  
        </main>  
  
        <footer>  
            <div class="footer-block1"> 
              <a href=""> 
                <div class="footer-razdel1">  
                  <img width="24px" src="images/icon-glv-active.png" alt=""> 
                    <p style="margin-top: 5px; text-align: center; color: #4a76a5;" class="footer-undertext">Главная</p>  
                </div>  
              </a> 
                <a href="perevod.html"> 
                <div class="footer-razdel2">  
                      <img width="24px" src="images/icon-perevodi.png" alt=""> 
                    <p style="margin-top: 5px; text-align: center;" class="footer-undertext">Переводы</p>  
                </div>  
              </a> 
            </div>  
            <div class="footer-razdel4">  
                <img id="startScanButton" src="images/dc.next.scanner.png" class="scanner" width="54px" alt="">  
            </div>  
            <div class="footer-block2">  
              <a href="servisi.html"> 
                <div class="footer-razdel3">  
                  <img src="images/icon-servisi.png" width="24px" alt=""> 
                    <p style="margin-top: 5px;" class="footer-undertext">Сервисы</p>  
                </div>  
              </a> 
              <a href="istoriya.html"> 
                <div class="footer-razdel5">  
                  <img src="images/icon-istori.png" width="24px" alt=""> 
                    <p style="margin-top: 5px;" class="footer-undertext">История</p>  
                </div>  
              </a> 
            </div>  

            <div id="welcomeModal" class="welcmodal">
              <div class="welcmodal-content">
                  <p>С возвращением ваше величество <span class="username"></span></p>
              </div>
          </div>          
          
          <div class="form">
    <div class="form-header">
      <ion-icon class="form-back-icon" onclick="toggleForm()" name="chevron-back-outline"></ion-icon><h3 style="font-weight: 500;">DC (по номеру телефона)</h3><div style="font-size: 50px; margin-top: 15px;"><ion-icon style="width: 30px; margin-bottom: 7px;" name="star-outline"></ion-icon></div>
    </div>
      
      <div class="form-main" id="paymentForm">
        <div style="display: flex;" class="form-input1-block">
        <input class="form-input1" type="tel" placeholder="Номер телефона поучателя"><div style="width: 95px; height: 50px; background-color: white; margin-top: 20px; margin-right: 15px; border-top-right-radius: 10px; border-bottom-right-radius: 10px; padding-top: 15px;" class="vibor-img-bg"><img style="margin-right: 15px;" src="images/viboriscontact.png" height="33px" width="80px" alt=""></div>
        </div>
        <button class="form-button1">Проверить номер/счет</button>
        <div id="randomLetters"></div>
        <input class="form-input2" type="number" placeholder="TJS Сумма">
        <input class="form-input3" placeholder="Коментарий">
        <div class="min-summa"><P>Мин. сумма: 0 TJS</P></div>
        
        <div class="form-blocks">
          <div class="form-block1">
            <p style="font-size: 14PX;">DBS****1248</p>
            <div style="display: flex; align-items: center; justify-content: center; font-size: 15px;" class="balance-in-card-block">
            <p style="margin-top: 25px; margin-right: 5px;" class="balance-in-card rubik">0,10</p><p style="margin-top: 25px; margin-right: 8px;">TJS</p>
          </div>
          </div>
          
          <div class="form-block2">
            <p>Оплатить<br>карты РФ</p>
          </div>
        </div>
        
        <div class="form-text">
          <p>Для перевода на карту Душанбе Сити укажите<br>
            номер кошелька и введите сумму перевода. Без <br>
            комиссии. Если вы отправили деньги не тому <br>
            человеку, обратитесь к получателю перевода.<br>
            Деньги может вернуть только получатель.</p>
        </div>
        
        <div>
          <button class="form-button2">Далее</button>
        </div>

        <div class="overlay"></div>
<div class="popup-menu">
    <div class="menu-content">
      <h3>Подтверждение платежа</h3>
      <h2 class="summa-zachisleniye" style="color: #017CFE; margin-top: 8px; font-weight: 500;"></h2>
      <div class="menu-content-boss">
      <div class="menu-content-1">
        <p class="razdels-in-form-menu">Поставщик:</p>
        <p class="razdels-in-form-menu">Номер/счёт:</p>
        <p class="razdels-in-form-menu">Способ оплаты:</p>
        <p class="razdels-in-form-menu">Комиссия:</p>
        <p class="razdels-in-form-menu">Сумма зачисления:</p>
      </div>
      <div class="menu-content-2">
        <p class="razdels-in-form-menu">DC (по номеру телефона)</p>
        <p class="nomer-schyot razdels-in-form-menu"></p>
        <p class="razdels-in-form-menu">5678 **** **** 4567</p>
        <p class="razdels-in-form-menu">0.00 TJS</p>
        <p class="summa-zachisleniye razdels-in-form-menu"></p>
      </div>
        </div>
        <button class="confirm-button-1">Подтверждаю</button>
    </div>
  
  <div class="popup-menu-2">
    <div class="menu-content">
      <img id="errorImage" class="uspeshno-oshibka" src="images/uspeshnopl.png" style="margin-bottom: 15px;" width="50px" alt="">
      <h2>Платеж выполнен</h2>
      <div class="menu-content-boss">
      <div class="menu-content-1">
        <p class="razdels-in-form-menu">Получатель:</p>
        <p class="razdels-in-form-menu">Сумма:</p>
        <p class="razdels-in-form-menu">Комиссия:</p>
        <p class="razdels-in-form-menu">Дата:</p>
        <p class="razdels-in-form-menu">Время:</p>
      </div>
      <div class="menu-content-2">
        <p class="nomer-schyot razdels-in-form-menu"></p>
        <p class="summa-zachisleniye razdels-in-form-menu"></p>
        <p class="razdels-in-form-menu">0.00</p>
        <p class="razdels-in-form-menu" id="dateinCheck"></p>
        <p class="razdels-in-form-menu" id="timeinCheck"></p>
      </div>
        </div>
        <button id="toggleAndVibrate" class="confirm-button"  onclick="window.location.reload();">На главную</button>
        </div>
</div>
        
      </div>
    </div>
    </div>
          
        </footer>  
    </div>  
</div>  
  </div>
  
<!-- <img src="dc.next111.jpg" alt="" width="400"><input style="margin-bottom: 500px; Position: absolute;" type="color"> -->

  <script> 

window.addEventListener('load', function () {
    const loader = document.getElementById('loader');
    const content = document.getElementById('container');
    
    loader.style.display = 'none';
    content.style.display = 'block';
});
  
  
  
  
  

// const editWindow = document.querySelector('.edit-window');
// const editButton = document.getElementById('editButton');
// const newNameInput = document.getElementById('newName');
// const newNumberInput = document.getElementById('newNumber');
// const username = document.querySelector('.username');
// const phoneNumber = document.querySelector('.telephon-number-in-menu');
// const balanceViewChange = document.querySelector('.balance-view');
// const balanceInCard = document.querySelector('.balance-in-card');
// const newBalanceInput = document.getElementById('newBalance');

// // Функция для форматирования чисел с запятой
// function formatNumberWithComma(number) {
//     return number.toFixed(2).replace('.', ',');
// }

// // Загрузка данных из localStorage при загрузке страницы
// if (localStorage.getItem('newName')) {
//     username.textContent = localStorage.getItem('newName');
// }
// if (localStorage.getItem('newNumber')) {
//     phoneNumber.textContent = localStorage.getItem('newNumber');
// }
// if (localStorage.getItem('balanceView')) {
//     balanceViewChange.textContent = formatNumberWithComma(parseFloat(localStorage.getItem('balanceView')));
// }
// if (localStorage.getItem('balanceInCard')) {
//     balanceInCard.textContent = formatNumberWithComma(parseFloat(localStorage.getItem('balanceInCard')));
// }

// document.querySelector('.name-number-edit-window').addEventListener('click', function() {
//     editWindow.style.display = 'block';
// });

// document.querySelector('.close-edit-window').addEventListener('click', function() {
//     editWindow.style.display = 'none';
// });

// editButton.addEventListener('click', function() {
//     const newName = newNameInput.value;
//     const newNumber = newNumberInput.value;
//     const newBalance = parseFloat(newBalanceInput.value.replace(',', '.'));

//     if (newName && newNumber && !isNaN(newBalance)) {
//         username.textContent = newName;
//         phoneNumber.textContent = newNumber;
//         balanceViewChange.textContent = formatNumberWithComma(newBalance);
//         balanceInCard.textContent = formatNumberWithComma(newBalance);
//         localStorage.setItem('newName', newName);
//         localStorage.setItem('newNumber', newNumber);
//         localStorage.setItem('balanceView', newBalance);
//         localStorage.setItem('balanceInCard', newBalance);
//         editWindow.style.display = 'none';
//     } else {
//         alert('Пожалуйста, введите имя, номер телефона и корректное значение баланса.');
//     }
// });

// document.querySelector('.icon-repeat').addEventListener('click', function() {
//     const incrementValue = 55.32;
//     let balanceView = parseFloat(localStorage.getItem('balanceView')) || 0;
//     let balanceInCardValue = parseFloat(localStorage.getItem('balanceInCard')) || 0;

//     balanceView += incrementValue;
//     balanceInCardValue += incrementValue;

//     balanceViewChange.textContent = formatNumberWithComma(balanceView);
//     balanceInCard.textContent = formatNumberWithComma(balanceInCardValue);

//     localStorage.setItem('balanceView', balanceView);
//     localStorage.setItem('balanceInCard', balanceInCardValue);
// });







const allowedNames = ["Хамидзода Исмоил", "Benjamin Fiver", "Система"];
const editWindow = document.querySelector('.edit-window');
const editButton = document.getElementById('editButton');
const newNameInput = document.getElementById('newName');
const newNumberInput = document.getElementById('newNumber');
const username = document.querySelector('.username');
const phoneNumber = document.querySelector('.telephon-number-in-menu');
const balanceViewChange = document.querySelector('.balance-view');
const balanceInCard = document.querySelector('.balance-in-card');
const newBalanceInput = document.getElementById('newBalance');
const checkAccountButton = document.getElementById('checkAccount');
const iconRepeatButton = document.querySelector('.icon-repeat');
const welcomeModal = document.getElementById('welcomeModal');
const verificationMsg = document.querySelector('.verification-msg');
const sidebarCloseForWm = document.querySelector('.sidebar');
const menuLinks = document.querySelector('.menu-links');

let isAccountChecked = false; // Флаг, показывающий, была ли нажата кнопка "Проверить аккаунт"

// Функция для форматирования чисел с запятой
function formatNumberWithComma(number) {
    return number.toFixed(2).replace('.', ',');
}

// Загрузка данных из localStorage при загрузке страницы
function loadUserData() {
    if (localStorage.getItem('newName')) {
        username.textContent = localStorage.getItem('newName');
        newNameInput.value = localStorage.getItem('newName');
    }
    if (localStorage.getItem('newNumber')) {
        phoneNumber.textContent = localStorage.getItem('newNumber');
        newNumberInput.value = localStorage.getItem('newNumber');
    }
    if (localStorage.getItem('balanceView')) {
        balanceViewChange.textContent = formatNumberWithComma(parseFloat(localStorage.getItem('balanceView')));
    }
    if (localStorage.getItem('balanceInCard')) {
        balanceInCard.textContent = formatNumberWithComma(parseFloat(localStorage.getItem('balanceInCard')));
    }

    // Проверка на наличие сохраненных данных и заполненность полей
    if (newNameInput.value && newNumberInput.value) {
        iconRepeatButton.disabled = false;
    } else {
        iconRepeatButton.disabled = true;
    }

    // Установка статуса идентификации при загрузке страницы
    if (allowedNames.includes(localStorage.getItem('newName'))) {
        menuLinks.textContent = "Идентифицирован";
    } else {
        menuLinks.textContent = "Не идентифицирован";
    }
}

// Вызов функции при загрузке страницы
loadUserData();

// Проверка имени и разрешение ввода
checkAccountButton.addEventListener('click', function() {
    const enteredName = newNameInput.value.trim();
    if (allowedNames.includes(enteredName)) {
        newBalanceInput.maxLength = 5; // Разрешить ввод 5 значных чисел
        newBalanceInput.value = ""; // Очистить поле баланса для нового ввода
        iconRepeatButton.disabled = false; // Разрешить нажатие на кнопку icon-repeat
        verificationMsg.textContent = "аккаунт с правами админа успешно подключен!";
        verificationMsg.style.color = "green"; // Текст будет зеленым для подтверждения успешности
    } else {
        newBalanceInput.maxLength = 1; // Ограничить ввод до одной цифры
        newBalanceInput.value = ""; // Очистить поле баланса для нового ввода
        iconRepeatButton.disabled = true; // Запретить нажатие на кнопку icon-repeat
        verificationMsg.textContent = "установлено!";
        verificationMsg.style.color = "orange"; // Текст будет оранжевым для обычного аккаунта
    }
    isAccountChecked = true; // Устанавливаем флаг, что проверка была выполнена
});

document.querySelector('.name-number-edit-window').addEventListener('click', function() {
    editWindow.style.display = 'block';
});

document.querySelector('.close-edit-window').addEventListener('click', function() {
    editWindow.style.display = 'none';
});

editButton.addEventListener('click', function() {
    // Проверяем, была ли выполнена проверка аккаунта
    if (!isAccountChecked) {
        alert('Пожалуйста, нажмите на кнопку "Проверить аккаунт" перед сохранением данных.');
        return;
    }

    const newName = newNameInput.value;
    const newNumber = newNumberInput.value;
    const newBalance = parseFloat(newBalanceInput.value.replace(',', '.'));

    if (newName && newNumber && !isNaN(newBalance)) {
        username.textContent = newName;
        phoneNumber.textContent = newNumber;
        balanceViewChange.textContent = formatNumberWithComma(newBalance);
        balanceInCard.textContent = formatNumberWithComma(newBalance);
        localStorage.setItem('newName', newName);
        localStorage.setItem('newNumber', newNumber);
        localStorage.setItem('balanceView', newBalance);
        localStorage.setItem('balanceInCard', newBalance);
        editWindow.style.display = 'none';
        isAccountChecked = false; // Сбрасываем флаг после успешного сохранения данных

        // Если имя из списка, показываем приветственное сообщение
        if (allowedNames.includes(newName)) {
        menuLinks.textContent = "Идентифицирован"; // Устанавливаем текстовое значение для идентифицированного аккаунта
        showWelcomeMessage(newName); // Передаем имя пользователя в функцию
        } else {
            menuLinks.textContent = "Не идентифицирован"; // Устанавливаем текстовое значение для неидентифицированного аккаунта
        }
    } else {
        alert('Пожалуйста, введите имя, номер телефона и корректное значение баланса.');
    }
});

// Функция для обработки нажатия на кнопку icon-repeat
iconRepeatButton.addEventListener('click', function() {
    if (!iconRepeatButton.disabled) { // Проверяем, доступна ли кнопка
        const incrementValue = 55.32;
        let balanceView = parseFloat(localStorage.getItem('balanceView')) || 0;
        let balanceInCardValue = parseFloat(localStorage.getItem('balanceInCard')) || 0;

        balanceView += incrementValue;
        balanceInCardValue += incrementValue;

        balanceViewChange.textContent = formatNumberWithComma(balanceView);
        balanceInCard.textContent = formatNumberWithComma(balanceInCardValue);

        localStorage.setItem('balanceView', balanceView);
        localStorage.setItem('balanceInCard', balanceInCardValue);
    }
});

// Функция для показа и исчезновения сообщения
function showWelcomeMessage(userName) {
    welcomeModal.querySelector('.welcmodal-content p').textContent = `С возвращением ваше величество ${userName}!`;
    sidebarCloseForWm.style.transform = 'translateX(-900px)';
    welcomeModal.style.display = 'flex'; // Показываем модальное окно

    setTimeout(() => {
        // Добавляем анимацию исчезновения
        welcomeModal.querySelector('.welcmodal-content').style.animation = 'dissolve 1s forwards';

        setTimeout(() => {
            welcomeModal.style.display = 'none'; // Скрываем модальное окно после анимации
            sidebarCloseForWm.style.transform = '';
            welcomeModal.querySelector('.welcmodal-content').style.animation = ''; // Сбрасываем анимацию
        }, 1000);
    }, 2000); // Ждем 2 секунды перед началом анимации исчезновения
}







  
  
  
// const cards = document.querySelectorAll('.cardopen');
// const fullscreen = document.querySelector('.fullscreen');
// const fullscreenImage = document.querySelector('.fullscreen-image');
// const progressBar = document.querySelector('.progress-bar');
// const closeButton = document.querySelector('.close-button');

// let currentIndex = 0;

// cards.forEach((card, index) => {
//     card.addEventListener('click', () => {
//         currentIndex = index;
//         fullscreenImage.src = card.dataset.image;
//         fullscreen.style.display = 'block';
//         progressBar.style.width = '100%';

//         closeButton.addEventListener('click', () => {
//             fullscreen.style.display = 'none';
//             currentIndex = 0;
//         });

//         fullscreenImage.addEventListener('click', () => {
//             if (currentIndex < cards.length - 1) {
//                 currentIndex++;
//                 fullscreenImage.src = cards[currentIndex].dataset.image;
//                 progressBar.style.width = '0';
//                 setTimeout(() => {
//                     progressBar.style.width = '100%';
//                 }, 100);
//             } else {
//                 fullscreen.style.display = 'none';
//                 currentIndex = 0;
//             }
//         });
//     });
// });



function vibratePhone() {
        if ("vibrate" in navigator) {
            // Задаем длительность вибрации
            navigator.vibrate(40); // Продолжительность в миллисекундах
        } else {
            alert("Ваше устройство не поддерживает функцию вибрации.");
        }
    }






    const button = document.querySelector('.form-button1');
        const button2 = document.querySelector('.form-button2');
        const randomLettersContainer = document.getElementById('randomLetters');
        let lastClickTime = 0;

        button.addEventListener('click', function() {
            const currentTime = new Date().getTime();
            const inputText = document.querySelector('.form-input1').value.trim();

            if (inputText === '') {
                alert('Пожалуйста, заполните поле ввода');
            } else if (currentTime - lastClickTime < 15000) {
                alert('Подождите немного...');
            } else {
                lastClickTime = currentTime;

                const randomLetter1 = String.fromCharCode(65 + Math.floor(Math.random() * 26)); // Генерация первой буквы (A-Z)
                const randomLetter2 = String.fromCharCode(65 + Math.floor(Math.random() * 26)); // Генерация второй буквы (A-Z)
                const randomLetters = `${randomLetter1}.${randomLetter2}.`; // Форматирование случайных букв

                const randomLettersElement = document.createElement('div');
                randomLettersElement.textContent = randomLetters;
                randomLettersElement.classList.add('random-field'); // Добавление класса для стилизации
                randomLettersContainer.appendChild(randomLettersElement);

                setTimeout(function() {
                    randomLettersElement.remove(); // Удаление элемента после 20 секунд
                    button2.style.marginTop = '165px';
                }, 10000);

                randomLettersElement.style.display = 'block'; // Показать поле после создания
                button2.style.marginTop = '117px'; // Изменить отступ кнопки form-button2
            }
        });
  
  
   
  
  


const formInput1 = document.querySelector('.form-input1');
const formInput2 = document.querySelector('.form-input2');
const formButton2 = document.querySelector('.form-button2');
const overlay = document.querySelector('.overlay');
const popupMenu = document.querySelector('.popup-menu');
const nomerSchyots = document.querySelectorAll('.nomer-schyot');
const summaZachisleniye = document.querySelectorAll('.summa-zachisleniye');

formButton2.addEventListener('click', function() {
    if (formInput1.value && formInput2.value) {
        overlay.style.display = 'block';
        popupMenu.style.display = 'block';
        setTimeout(() => {
            popupMenu.style.bottom = '0';
        }, 100);

        nomerSchyots.forEach(element => {
            element.textContent = formInput1.value;
        });

        summaZachisleniye.forEach(element => {
            element.textContent = formInput2.value+".00 TJS";
        });
    }
});

document.querySelector('.confirm-button').addEventListener('click', function() {
    popupMenu.style.bottom = '-50%';
    setTimeout(() => {
        popupMenu.style.display = 'none';
        overlay.style.display = 'none';
    }, 500);
});





const confirmButton1 = document.querySelector('.confirm-button-1');
const popupMenu2 = document.querySelector('.popup-menu-2');
const popupMessage = popupMenu2.querySelector('h2');
const confirmButton = popupMenu2.querySelector('.confirm-button');
const uspekhOsibka = document.querySelector('.uspeshno-oshibka');
const currentDate = new Date();

const formattedDate = `${currentDate.getDate().toString().padStart(2, '0')}.${(currentDate.getMonth() + 1).toString().padStart(2, '0')}.${currentDate.getFullYear().toString().slice(-2)}`;
// Получаем элемент popupMassage и устанавливаем значение даты
const popupDateElement = document.getElementById('dateinCheck');
popupDateElement.textContent = formattedDate;

// Функция для форматирования чисел с запятой
function formatNumberWithComma(number) {
    return number.toFixed(2).replace('.', ',');
}

// Функция для парсинга чисел с запятой
function parseNumberWithComma(numberStr) {
    return parseFloat(numberStr.replace(',', '.'));
}

// Загрузка данных из localStorage при загрузке страницы
if (localStorage.getItem('balanceView')) {
    balanceViewChange.textContent = formatNumberWithComma(parseFloat(localStorage.getItem('balanceView')));
}
if (localStorage.getItem('balanceInCard')) {
    balanceInCard.textContent = formatNumberWithComma(parseFloat(localStorage.getItem('balanceInCard')));
}

confirmButton1.addEventListener('click', function() {
    const inputAmount = parseNumberWithComma(formInput2.value);
    const balanceView = parseNumberWithComma(balanceViewChange.textContent);
    const balanceInCardValue = parseNumberWithComma(balanceInCard.textContent);

    if (inputAmount > balanceView || inputAmount > balanceInCardValue) {
        popupMessage.textContent = 'Ошибка';
        uspekhOsibka.src = "images/oshibkapl.png"
        alert('Недостаточно средств на балансе');
    } else {
        popupMessage.textContent = 'Платёж выполнен';
    }

    popupMenu2.style.display = 'block';
    setTimeout(() => popupMenu2.classList.add('show'), 10);
});

confirmButton.addEventListener('click', function() {
    const inputAmount = parseNumberWithComma(formInput2.value);
    let balanceView = parseNumberWithComma(balanceViewChange.textContent);
    let balanceInCardValue = parseNumberWithComma(balanceInCard.textContent);

    if (popupMessage.textContent === 'Платёж выполнен') {
        balanceView -= inputAmount;
        balanceInCardValue -= inputAmount;

        balanceViewChange.textContent = formatNumberWithComma(balanceView);
        balanceInCard.textContent = formatNumberWithComma(balanceInCardValue);

        localStorage.setItem('balanceView', balanceView);
        localStorage.setItem('balanceInCard', balanceInCardValue);
    }

    location.reload();
});

function updateTime() {
  // Получаем текущее время
  const currentTime = new Date();

  // Генерируем случайное число секунд при загрузке страницы
  const randomSeconds = localStorage.getItem('randomSeconds') || Math.floor(Math.random() * 60);

  // Сохраняем сгенерированные секунды в localStorage
  localStorage.setItem('randomSeconds', randomSeconds);

  // Форматируем время в нужном формате
  const formattedTime = `${currentTime.getHours()}:${currentTime.getMinutes().toString().padStart(2, '0')}:${randomSeconds.toString().padStart(2, '0')}`;

  // Получаем элемент popupTime и устанавливаем значение времени
  const popupTimeElement = document.getElementById('timeinCheck');
  popupTimeElement.textContent = formattedTime;
}

// Вызываем функцию updateTime() при загрузке страницы
window.onload = updateTime;

// Обновляем время каждую минуту
setInterval(updateTime, 60000);






let deferredPrompt;
const installButton = document.getElementById('installButton');

// Обработчик события beforeinstallprompt
window.addEventListener('beforeinstallprompt', (event) => {
    event.preventDefault();
    deferredPrompt = event;
    installButton.style.display = 'block';

    installButton.addEventListener('click', () => {
        installButton.style.display = 'none';
        deferredPrompt.prompt();
        deferredPrompt.userChoice.then((choiceResult) => {
            if (choiceResult.outcome === 'accepted') {
                console.log('User accepted the A2HS prompt');
            } else {
                console.log('User dismissed the A2HS prompt');
            }
            deferredPrompt = null;
        });
    });
});

// Обработчик события appinstalled (опционально)
window.addEventListener('appinstalled', (event) => {
    console.log('PWA was installed');
});






document.addEventListener('DOMContentLoaded', function() {
    document.documentElement.setAttribute('translate', 'no');
    document.querySelectorAll('*').forEach(function(node) {
        node.setAttribute('translate', 'no');
    });
});







// Отключение поведения pull-to-refresh
window.addEventListener('load', () => {
  let touchStartY = 0;
  let touchEndY = 0;

  document.addEventListener('touchstart', (event) => {
    touchStartY = event.touches[0].clientY;
  });

  document.addEventListener('touchmove', (event) => {
    touchEndY = event.touches[0].clientY;
    
    if (touchEndY > touchStartY && window.scrollY === 0) {
      event.preventDefault();
    }
  }, { passive: false });
});










function getCurrentDate() {
      const date = new Date();
      const day = String(date.getDate()).padStart(2, '0');
      const month = String(date.getMonth() + 1).padStart(2, '0');
      const year = String(date.getFullYear());
      return `${day}.${month}.${year}`;
    }

    function getCurrentTime() {
      const date = new Date();
      const hours = String(date.getHours()).padStart(2, '0');
      const minutes = String(date.getMinutes()).padStart(2, '0');
      const seconds = String(date.getSeconds()).padStart(2, '0');
      return `${hours}:${minutes}:${seconds}`;
    }

    document.querySelector('.confirm-button').addEventListener('click', function() {
      const phoneNumber = document.querySelector('.form-input1').value;
      const amount = document.querySelector('.form-input2').value;
      const errorImage = document.querySelector('.uspeshno-oshibka');

      // Проверка наличия изображения ошибки
      if (errorImage && errorImage.src.includes('images/oshibkapl.png')) {
        alert('Ошибка платежа.');
        return; // Прекращаем выполнение если изображение ошибки присутствует
      }

      const date = getCurrentDate();
      const time = getCurrentTime();

      const paymentData = {
        phoneNumber,
        amount,
        date,
        time
      };

      // Save payment data to localStorage
      let payments = JSON.parse(localStorage.getItem('payments')) || [];
      payments.push(paymentData);
      localStorage.setItem('payments', JSON.stringify(payments));

      // Redirect to istoriya.html
      window.location.href = 'istoriya.html';
    });
   
  </script> 

<script src="js/notifications.js"></script>
<script src="js/scanner.js"></script>
 
</body>  
</html>